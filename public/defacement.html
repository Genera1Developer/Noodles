<div class="tab-content" id="defacement">
    <h2>Defacement</h2>
    <p class="alert alert-warning"><strong>Warning:</strong> This tool should only be used on systems you own or have explicit permission to test. Unauthorized defacement is illegal and unethical.</p>

    <form id="defacement-form">
        <div class="form-group">
            <label for="defacement-url">Target URL:</label>
            <input type="url" class="form-control" id="defacement-url" placeholder="http://example.com" required>
            <small class="form-text text-muted">The URL of the website you want to deface.</small>
        </div>

        <div class="form-group">
            <label for="defacement-script">Defacement Script URL:</label>
            <input type="url" class="form-control" id="defacement-script" placeholder="http://example.com/deface.js" required>
            <small class="form-text text-muted">The URL of the JavaScript file containing the defacement code.</small>
        </div>

        <button type="button" class="btn btn-danger" onclick="startDefacement()">Start Defacement</button>
    </form>

    <div id="defacement-status" class="mt-3"></div>
</div>

<script>
async function startDefacement() {
    const targetUrl = document.getElementById('defacement-url').value;
    const defacementScriptUrl = document.getElementById('defacement-script').value;
    const statusDiv = document.getElementById('defacement-status');

    statusDiv.textContent = 'Initiating defacement...';

    try {
        const response = await fetch('/main/defacement', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json'
            },
            body: JSON.stringify({ targetUrl, defacementScriptUrl })
        });

        const data = await response.json();

        if (data.success) {
            statusDiv.textContent = 'Defacement initiated successfully.';
        } else {
            statusDiv.textContent = `Defacement failed: ${data.error}`;
        }
    } catch (error) {
        statusDiv.textContent = `An error occurred: ${error.message}`;
    }
}
</script>